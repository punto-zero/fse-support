openapi: 3.0.1
info:
  description: "## Introduzione\nIl sistema espone le sue entità attraverso Web Service\
    \ API basato su architettura [REST](@https://en.wikipedia.org/wiki/REST).\n\n\
    Il formato delle richieste è in linea con le specifiche del [gateway nazionale](https://github.com/ministero-salute/it-fse-support/tree/34a44509c913c5a19aa341964bfe5b7b015bd60f/doc/integrazione-gateway#5-servizio-di-eliminazione-documento).\n\
    \n## Informazioni sulle richieste API REST\n\n### Autenticazione\nLe linee guida\
    \ nazionali di FSE indicano come metodo di autenticazione\nl'utilizzo di due token\
    \ [JWT](https://github.com/ministero-salute/it-fse-support/tree/main/doc/integrazione-gateway#131-campi-contenuti-nei-jwt)\n\
    presenti nell'header della richiesta.\n- `Authorization: Bearer {token}` - Token\
    \ di auth che ha informazioni riguardo l'autore della richiesta\n- `FSE-JWT-Signature:\
    \ {token}` - Token di firma che ha informazioni utili per completare la richiesta\
    \ con successo.\n\n### File Upload\nLe dimensioni massime accettate per il caricamento\
    \ di un file sono 5MB.\n\n## Errori\nIl servizio utilizza codici di risposta HTTP\
    \ convenzionali per indicare il successo o il fallimento di una richiesta API.\n\
    In generale codici nel range di\n* `2xx` indicano successo\n* `4xx` indicano errori\
    \ client\n* `5xx` indicano errori server.\n\nIl formato JSON dell'errore segue\
    \ lo standard RFC 7807 (Problem Details) di seguito definito\n\n ```json\n { \n\
    \   \"type\": String,\n   \"title\": String,\n   \"status\": int,\n   \"detail\"\
    : String,\n   \"instance\": path \n }\n ```\n"
  title: Interfaccia FSE2 per servizi ITI IHE
  version: v1
security:
  - bearerAuth: []
paths:
  /fse2/v1/documents/validation:
    post:
      tags:
        - FSE2
      summary: Validazione documenti
      description: Verifica se la pubblicazione del Documento è attuabile
      operationId: validateDocument
      parameters:
        - in: header
          name: FSE-JWT-Signature
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - file
                - requestBody
              type: object
              properties:
                requestBody:
                  $ref: '#/components/schemas/ValidationCDAReqDTO'
                file:
                  type: string
                  format: binary
              additionalProperties: false
      responses:
        '200':
          description: Validazione positiva a seguito di activity verifica
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationResDTO'
        '201':
          description: Validazione positiva a seguito di activity validation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationResDTO'
      security:
        - bearerAuth: []
  /fse2/v1/repositories/{repositoryId}/documents:
    post:
      tags:
        - FSE2
      summary: Pubblicazione creazione documenti
      description: Pubblica un Documento nel circuito FSE2
      operationId: createDocument
      parameters:
        - in: header
          name: FSE-JWT-Signature
          required: true
          schema:
            type: string
        - in: path
          name: repositoryId
          required: true
          schema:
            type: string
            format: OID
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - file
                - requestBody
              type: object
              properties:
                requestBody:
                  $ref: '#/components/schemas/PublicationCreationReqDTO'
                file:
                  type: string
                  format: binary
              additionalProperties: false
      responses:
        '201':
          description: Presa in carico eseguita con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicationResDTO'
      security:
        - bearerAuth: []
  /fse2/v1/repositories/{repositoryId}/documents/validate-and-create:
    post:
      tags:
        - FSE2
      summary: Pubblicazione creazione documenti
      description: Valida e pubblica un Documento nel circuito FSE2
      operationId: validateAndCreateDocument
      parameters:
        - in: header
          name: FSE-JWT-Signature
          required: true
          schema:
            type: string
        - in: path
          name: repositoryId
          required: true
          schema:
            type: string
            format: OID
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - file
                - requestBody
              type: object
              properties:
                requestBody:
                  $ref: '#/components/schemas/ValidateAndCreateDTO'
                file:
                  type: string
                  format: binary
              additionalProperties: false
      responses:
        '201':
          description: Presa in carico eseguita con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicationResDTO'
      security:
        - bearerAuth: []
  /fse2/v1/repositories/{repositoryId}/documents/{documentId}:
    put:
      tags:
        - FSE2
      summary: Sostituzione documenti
      description: Sostituisce un Documento nel circuito FSE2
      operationId: replaceDocument
      parameters:
        - in: header
          name: FSE-JWT-Signature
          required: true
          schema:
            type: string
        - in: path
          name: repositoryId
          required: true
          schema:
            type: string
            format: OID
        - in: path
          name: documentId
          required: true
          schema:
            type: string
            format: EI
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - file
                - requestBody
              type: object
              properties:
                requestBody:
                  $ref: '#/components/schemas/PublicationUpdateReqDTO'
                file:
                  type: string
                  format: binary
              additionalProperties: false
      responses:
        '200':
          description: Presa in carico eseguita con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicationResDTO'
      security:
        - bearerAuth: []
    delete:
      tags:
        - FSE2
      summary: Elimina un Documento
      description: Elimina un Documento
      operationId: deleteDocument
      parameters:
        - in: header
          name: FSE-JWT-Signature
          required: true
          schema:
            type: string
        - in: path
          name: repositoryId
          required: true
          schema:
            type: string
            format: OID
        - in: path
          name: documentId
          required: true
          schema:
            type: string
            format: EI
      responses:
        '200':
          description: Cancellazione eseguita con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseWifDTO'
      security:
        - bearerAuth: []
  /fse2/v1/repositories/{repositoryId}/documents/{documentId}/metadata:
    put:
      tags:
        - FSE2
      summary: Aggiornamento metadati
      description: Aggiorna i metadati di uno specifico documento.
      operationId: updateDocumentMetadata
      parameters:
        - in: header
          name: FSE-JWT-Signature
          required: true
          schema:
            type: string
        - in: path
          name: repositoryId
          required: true
          schema:
            type: string
            format: OID
        - in: path
          name: documentId
          required: true
          schema:
            type: string
            format: EI
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PublicationMetadataReqDTO'
        required: true
      responses:
        '200':
          description: Aggiornamento eseguito con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseWifDTO'
      security:
        - bearerAuth: []
  /fse2/v1/repositories/{repositoryId}/documents/validate-and-replace/{documentId}:
    put:
      tags:
        - FSE2
      summary: Sostituzione documenti
      description: Sostituisce un Documento nel circuito FSE2
      operationId: validateAndReplaceDocument
      parameters:
        - in: header
          name: FSE-JWT-Signature
          required: true
          schema:
            type: string
        - in: path
          name: repositoryId
          required: true
          schema:
            type: string
            format: OID
        - in: path
          name: documentId
          required: true
          schema:
            type: string
            format: EIstring
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - file
                - requestBody
              type: object
              properties:
                requestBody:
                  $ref: '#/components/schemas/ValidateAndReplaceDTO'
                file:
                  type: string
                  format: binary
              additionalProperties: false
      responses:
        '200':
          description: Presa in carico eseguita con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicationResDTO'
      security:
        - bearerAuth: []
  /fse2/v1/status/{workflowInstanceId}:
    get:
      tags:
        - FSE2
      summary: Recupero stato transazione
      description: Recupera il dettaglio degli eventi tramite il workflow instance id.
      operationId: getEventsByWorkflowInstanceId
      parameters:
        - name: workflowInstanceId
          in: path
          description: Identificativo del workflow
          required: true
          schema:
            maxLength: 256
            minLength: 0
            type: string
            description: Identificativo del workflow
      responses:
        '200':
          description: Eventi recuperati con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionInspectResDTO'
  /fse2/v1/status/search/{traceId}:
    get:
      tags:
        - FSE2
      summary: Recupero stato transazione
      description: Recupera il dettaglio degli eventi tramite il trace id.
      operationId: getEventsByTraceId
      parameters:
        - name: traceId
          in: path
          required: true
          schema:
            maxLength: 100
            minLength: 1
            type: string
      responses:
        '200':
          description: Eventi recuperati con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionInspectResDTO'
components:
  schemas:
    PublicationUpdateReqDTO:
      required:
        - assettoOrganizzativo
        - identificativoDoc
        - identificativoRep
        - identificativoSottomissione
        - tipoAttivitaClinica
        - tipoDocumentoLivAlto
        - tipologiaStruttura
      type: object
      properties:
        tipologiaStruttura:
          type: string
          description: Tipologia struttura che ha prodotto il documento
          enum:
            - Ospedale
            - Prevenzione
            - Territorio
            - SistemaTS
            - Cittadino
            - MdsPN_DGC
        attiCliniciRegoleAccesso:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Regola di accesso
        tipoDocumentoLivAlto:
          type: string
          description: Tipo documento alto livello
          enum:
            - WOR
            - REF
            - LDO
            - RIC
            - SUM
            - TAC
            - PRS
            - PRE
            - ESE
            - PDC
            - VAC
            - CER
            - VRB
            - CON
            - CNT
        assettoOrganizzativo:
          type: string
          description: Assetto organizzativo che ha portato alla creazione del documento
          enum:
            - AD_PSC001
            - AD_PSC002
            - AD_PSC003
            - AD_PSC004
            - AD_PSC005
            - AD_PSC006
            - AD_PSC007
            - AD_PSC008
            - AD_PSC009
            - AD_PSC010
            - AD_PSC011
            - AD_PSC012
            - AD_PSC013
            - AD_PSC014
            - AD_PSC015
            - AD_PSC018
            - AD_PSC019
            - AD_PSC020
            - AD_PSC021
            - AD_PSC024
            - AD_PSC025
            - AD_PSC026
            - AD_PSC027
            - AD_PSC028
            - AD_PSC029
            - AD_PSC030
            - AD_PSC031
            - AD_PSC032
            - AD_PSC033
            - AD_PSC034
            - AD_PSC035
            - AD_PSC036
            - AD_PSC037
            - AD_PSC038
            - AD_PSC039
            - AD_PSC040
            - AD_PSC041
            - AD_PSC042
            - AD_PSC043
            - AD_PSC046
            - AD_PSC047
            - AD_PSC048
            - AD_PSC049
            - AD_PSC050
            - AD_PSC051
            - AD_PSC052
            - AD_PSC054
            - AD_PSC055
            - AD_PSC056
            - AD_PSC057
            - AD_PSC058
            - AD_PSC060
            - AD_PSC061
            - AD_PSC062
            - AD_PSC064
            - AD_PSC065
            - AD_PSC066
            - AD_PSC067
            - AD_PSC068
            - AD_PSC069
            - AD_PSC070
            - AD_PSC071
            - AD_PSC072
            - AD_PSC073
            - AD_PSC074
            - AD_PSC075
            - AD_PSC076
            - AD_PSC077
            - AD_PSC078
            - AD_PSC094
            - AD_PSC096
            - AD_PSC097
            - AD_PSC098
            - AD_PSC099
            - AD_PSC100
            - AD_PSC101
            - AD_PSC102
            - AD_PSC103
            - AD_PSC104
            - AD_PSC107
            - AD_PSC109
            - AD_PSC121
            - AD_PSC122
            - AD_PSC126
            - AD_PSC129
            - AD_PSC130
            - AD_PSC131
            - AD_PSC199
            - AD_PSC999
        dataInizioPrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data inizio prestazione
        dataFinePrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data fine prestazione
        conservazioneANorma:
          maxLength: 100
          minLength: 0
          type: string
          description: Conservazione a norma
        tipoAttivitaClinica:
          type: string
          description: Tipo attivitÃ  clinica
          enum:
            - PHR
            - CON
            - DIS
            - ERP
            - Sistema_TS
            - INI
            - PN_DGC
            - OBS
        identificativoSottomissione:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo sottomissione
        descriptions:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Descriptions
        administrativeRequest:
          maxItems: 1000
          minItems: 0
          type: array
          description: Administrative request
          items:
            type: string
            description: Administrative request
            enum:
              - SSN
              - INPATIENT
              - NOSSN
              - SSR
              - DONOR
        identificativoDoc:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo documento
        identificativoRep:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo repository
        mode:
          type: string
          description: ModalitÃ  di iniezione del CDA
          enum:
            - ATTACHMENT
            - RESOURCE
        healthDataFormat:
          type: string
          description: Formato dei dati sanitari
          enum:
            - CDA
        workflowInstanceId:
          maxLength: 256
          minLength: 0
          type: string
          description: Identificativo del workflow
      additionalProperties: false
    ErrorResponseDTO:
      type: object
      properties:
        traceID:
          maxLength: 100
          minLength: 0
          type: string
          description: Indentificativo univoco della richiesta dell'utente
        spanID:
          maxLength: 100
          minLength: 0
          type: string
          description: Indentificativo univoco di un task della richiesta dell'utente (differisce dal traceID solo in caso di chiamate sincrone in cascata)
        type:
          maxLength: 100
          minLength: 0
          type: string
          description: URI da utilizzare come identificativo del problema che si Ã¨ verificato
        title:
          maxLength: 1000
          minLength: 0
          type: string
          description: Descrizione sintetica della tipologia dâ€™errore
        detail:
          maxLength: 200000
          minLength: 0
          type: string
          description: Dettaglio della tipologia dâ€™errore
        status:
          maximum: 599
          minimum: 100
          type: integer
          description: Stato http
          format: int32
        instance:
          maxLength: 100
          minLength: 0
          type: string
          description: URI che identifica la specifica occorrenza del problema
      additionalProperties: false
    PublicationResDTO:
      type: object
      properties:
        traceID:
          maxLength: 100
          minLength: 0
          type: string
        spanID:
          maxLength: 100
          minLength: 0
          type: string
        warning:
          maxLength: 10000
          minLength: 0
          type: string
          description: Dettaglio del warning
        workflowInstanceId:
          maxLength: 256
          minLength: 0
          type: string
          description: Identificativo del workflow instance id
      additionalProperties: false
    PublicationMetadataReqDTO:
      required:
        - assettoOrganizzativo
        - identificativoSottomissione
        - tipoAttivitaClinica
        - tipoDocumentoLivAlto
        - tipologiaStruttura
      type: object
      properties:
        tipologiaStruttura:
          type: string
          description: Tipologia struttura che ha prodotto il documento
          enum:
            - Ospedale
            - Prevenzione
            - Territorio
            - SistemaTS
            - Cittadino
            - MdsPN_DGC
        attiCliniciRegoleAccesso:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Regola di accesso
        tipoDocumentoLivAlto:
          type: string
          description: Tipo documento alto livello
          enum:
            - WOR
            - REF
            - LDO
            - RIC
            - SUM
            - TAC
            - PRS
            - PRE
            - ESE
            - PDC
            - VAC
            - CER
            - VRB
            - CON
            - CNT
        assettoOrganizzativo:
          type: string
          description: Assetto organizzativo che ha portato alla creazione del documento
          enum:
            - AD_PSC001
            - AD_PSC002
            - AD_PSC003
            - AD_PSC004
            - AD_PSC005
            - AD_PSC006
            - AD_PSC007
            - AD_PSC008
            - AD_PSC009
            - AD_PSC010
            - AD_PSC011
            - AD_PSC012
            - AD_PSC013
            - AD_PSC014
            - AD_PSC015
            - AD_PSC018
            - AD_PSC019
            - AD_PSC020
            - AD_PSC021
            - AD_PSC024
            - AD_PSC025
            - AD_PSC026
            - AD_PSC027
            - AD_PSC028
            - AD_PSC029
            - AD_PSC030
            - AD_PSC031
            - AD_PSC032
            - AD_PSC033
            - AD_PSC034
            - AD_PSC035
            - AD_PSC036
            - AD_PSC037
            - AD_PSC038
            - AD_PSC039
            - AD_PSC040
            - AD_PSC041
            - AD_PSC042
            - AD_PSC043
            - AD_PSC046
            - AD_PSC047
            - AD_PSC048
            - AD_PSC049
            - AD_PSC050
            - AD_PSC051
            - AD_PSC052
            - AD_PSC054
            - AD_PSC055
            - AD_PSC056
            - AD_PSC057
            - AD_PSC058
            - AD_PSC060
            - AD_PSC061
            - AD_PSC062
            - AD_PSC064
            - AD_PSC065
            - AD_PSC066
            - AD_PSC067
            - AD_PSC068
            - AD_PSC069
            - AD_PSC070
            - AD_PSC071
            - AD_PSC072
            - AD_PSC073
            - AD_PSC074
            - AD_PSC075
            - AD_PSC076
            - AD_PSC077
            - AD_PSC078
            - AD_PSC094
            - AD_PSC096
            - AD_PSC097
            - AD_PSC098
            - AD_PSC099
            - AD_PSC100
            - AD_PSC101
            - AD_PSC102
            - AD_PSC103
            - AD_PSC104
            - AD_PSC107
            - AD_PSC109
            - AD_PSC121
            - AD_PSC122
            - AD_PSC126
            - AD_PSC129
            - AD_PSC130
            - AD_PSC131
            - AD_PSC199
            - AD_PSC999
        dataInizioPrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data inizio prestazione
        dataFinePrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data fine prestazione
        conservazioneANorma:
          maxLength: 100
          minLength: 0
          type: string
          description: Conservazione a norma
        tipoAttivitaClinica:
          type: string
          description: Tipo attivitÃ  clinica
          enum:
            - PHR
            - CON
            - DIS
            - ERP
            - Sistema_TS
            - INI
            - PN_DGC
            - OBS
        identificativoSottomissione:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo sottomissione
        descriptions:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Descriptions
        administrativeRequest:
          maxItems: 1000
          minItems: 0
          type: array
          description: Administrative request
          items:
            type: string
            description: Administrative request
            enum:
              - SSN
              - INPATIENT
              - NOSSN
              - SSR
              - DONOR
      additionalProperties: false
    ResponseWifDTO:
      type: object
      properties:
        traceID:
          maxLength: 100
          minLength: 0
          type: string
        spanID:
          maxLength: 100
          minLength: 0
          type: string
        warning:
          maxLength: 10000
          minLength: 0
          type: string
          description: Dettaglio del warning
        workflowInstanceId:
          maxLength: 256
          minLength: 0
          type: string
          description: Identificativo del workflow instance id
      additionalProperties: false
    ValidateAndReplaceDTO:
      required:
        - assettoOrganizzativo
        - identificativoDoc
        - identificativoRep
        - identificativoSottomissione
        - tipoAttivitaClinica
        - tipoDocumentoLivAlto
        - tipologiaStruttura
      type: object
      properties:
        tipologiaStruttura:
          type: string
          description: Tipologia struttura che ha prodotto il documento
          enum:
            - Ospedale
            - Prevenzione
            - Territorio
            - SistemaTS
            - Cittadino
            - MdsPN_DGC
        attiCliniciRegoleAccesso:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Regola di accesso
        tipoDocumentoLivAlto:
          type: string
          description: Tipo documento alto livello
          enum:
            - WOR
            - REF
            - LDO
            - RIC
            - SUM
            - TAC
            - PRS
            - PRE
            - ESE
            - PDC
            - VAC
            - CER
            - VRB
            - CON
            - CNT
        assettoOrganizzativo:
          type: string
          description: Assetto organizzativo che ha portato alla creazione del documento
          enum:
            - AD_PSC001
            - AD_PSC002
            - AD_PSC003
            - AD_PSC004
            - AD_PSC005
            - AD_PSC006
            - AD_PSC007
            - AD_PSC008
            - AD_PSC009
            - AD_PSC010
            - AD_PSC011
            - AD_PSC012
            - AD_PSC013
            - AD_PSC014
            - AD_PSC015
            - AD_PSC018
            - AD_PSC019
            - AD_PSC020
            - AD_PSC021
            - AD_PSC024
            - AD_PSC025
            - AD_PSC026
            - AD_PSC027
            - AD_PSC028
            - AD_PSC029
            - AD_PSC030
            - AD_PSC031
            - AD_PSC032
            - AD_PSC033
            - AD_PSC034
            - AD_PSC035
            - AD_PSC036
            - AD_PSC037
            - AD_PSC038
            - AD_PSC039
            - AD_PSC040
            - AD_PSC041
            - AD_PSC042
            - AD_PSC043
            - AD_PSC046
            - AD_PSC047
            - AD_PSC048
            - AD_PSC049
            - AD_PSC050
            - AD_PSC051
            - AD_PSC052
            - AD_PSC054
            - AD_PSC055
            - AD_PSC056
            - AD_PSC057
            - AD_PSC058
            - AD_PSC060
            - AD_PSC061
            - AD_PSC062
            - AD_PSC064
            - AD_PSC065
            - AD_PSC066
            - AD_PSC067
            - AD_PSC068
            - AD_PSC069
            - AD_PSC070
            - AD_PSC071
            - AD_PSC072
            - AD_PSC073
            - AD_PSC074
            - AD_PSC075
            - AD_PSC076
            - AD_PSC077
            - AD_PSC078
            - AD_PSC094
            - AD_PSC096
            - AD_PSC097
            - AD_PSC098
            - AD_PSC099
            - AD_PSC100
            - AD_PSC101
            - AD_PSC102
            - AD_PSC103
            - AD_PSC104
            - AD_PSC107
            - AD_PSC109
            - AD_PSC121
            - AD_PSC122
            - AD_PSC126
            - AD_PSC129
            - AD_PSC130
            - AD_PSC131
            - AD_PSC199
            - AD_PSC999
        dataInizioPrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data inizio prestazione
        dataFinePrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data fine prestazione
        conservazioneANorma:
          maxLength: 100
          minLength: 0
          type: string
          description: Conservazione a norma
        tipoAttivitaClinica:
          type: string
          description: Tipo attivitÃ  clinica
          enum:
            - PHR
            - CON
            - DIS
            - ERP
            - Sistema_TS
            - INI
            - PN_DGC
            - OBS
        identificativoSottomissione:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo sottomissione
        descriptions:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Descriptions
        administrativeRequest:
          maxItems: 1000
          minItems: 0
          type: array
          description: Administrative request
          items:
            type: string
            description: Administrative request
            enum:
              - SSN
              - INPATIENT
              - NOSSN
              - SSR
              - DONOR
        identificativoDoc:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo documento
        identificativoRep:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo repository
        mode:
          type: string
          description: ModalitÃ  di iniezione del CDA
          enum:
            - ATTACHMENT
            - RESOURCE
        healthDataFormat:
          type: string
          description: Formato dei dati sanitari
          enum:
            - CDA
      additionalProperties: false
    ValidationErrorResponseDTO:
      type: object
      properties:
        traceID:
          maxLength: 100
          minLength: 0
          type: string
          description: Indentificativo univoco della richiesta dell'utente
        spanID:
          maxLength: 100
          minLength: 0
          type: string
          description: Indentificativo univoco di un task della richiesta dell'utente (differisce dal traceID solo in caso di chiamate sincrone in cascata)
        type:
          maxLength: 100
          minLength: 0
          type: string
          description: URI da utilizzare come identificativo del problema che si Ã¨ verificato
        title:
          maxLength: 1000
          minLength: 0
          type: string
          description: Descrizione sintetica della tipologia dâ€™errore
        detail:
          maxLength: 200000
          minLength: 0
          type: string
          description: Dettaglio della tipologia dâ€™errore
        status:
          maximum: 599
          minimum: 100
          type: integer
          description: Stato http
          format: int32
        instance:
          maxLength: 100
          minLength: 0
          type: string
          description: URI che identifica la specifica occorrenza del problema
        workflowInstanceId:
          maxLength: 256
          minLength: 0
          type: string
          description: Identificativo del workflow
      additionalProperties: false
    PublicationCreationReqDTO:
      required:
        - assettoOrganizzativo
        - identificativoDoc
        - identificativoRep
        - identificativoSottomissione
        - tipoAttivitaClinica
        - tipoDocumentoLivAlto
        - tipologiaStruttura
      type: object
      properties:
        tipologiaStruttura:
          type: string
          description: Tipologia struttura che ha prodotto il documento
          enum:
            - Ospedale
            - Prevenzione
            - Territorio
            - SistemaTS
            - Cittadino
            - MdsPN_DGC
        attiCliniciRegoleAccesso:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Regola di accesso
        tipoDocumentoLivAlto:
          type: string
          description: Tipo documento alto livello
          enum:
            - WOR
            - REF
            - LDO
            - RIC
            - SUM
            - TAC
            - PRS
            - PRE
            - ESE
            - PDC
            - VAC
            - CER
            - VRB
            - CON
            - CNT
        assettoOrganizzativo:
          type: string
          description: Assetto organizzativo che ha portato alla creazione del documento
          enum:
            - AD_PSC001
            - AD_PSC002
            - AD_PSC003
            - AD_PSC004
            - AD_PSC005
            - AD_PSC006
            - AD_PSC007
            - AD_PSC008
            - AD_PSC009
            - AD_PSC010
            - AD_PSC011
            - AD_PSC012
            - AD_PSC013
            - AD_PSC014
            - AD_PSC015
            - AD_PSC018
            - AD_PSC019
            - AD_PSC020
            - AD_PSC021
            - AD_PSC024
            - AD_PSC025
            - AD_PSC026
            - AD_PSC027
            - AD_PSC028
            - AD_PSC029
            - AD_PSC030
            - AD_PSC031
            - AD_PSC032
            - AD_PSC033
            - AD_PSC034
            - AD_PSC035
            - AD_PSC036
            - AD_PSC037
            - AD_PSC038
            - AD_PSC039
            - AD_PSC040
            - AD_PSC041
            - AD_PSC042
            - AD_PSC043
            - AD_PSC046
            - AD_PSC047
            - AD_PSC048
            - AD_PSC049
            - AD_PSC050
            - AD_PSC051
            - AD_PSC052
            - AD_PSC054
            - AD_PSC055
            - AD_PSC056
            - AD_PSC057
            - AD_PSC058
            - AD_PSC060
            - AD_PSC061
            - AD_PSC062
            - AD_PSC064
            - AD_PSC065
            - AD_PSC066
            - AD_PSC067
            - AD_PSC068
            - AD_PSC069
            - AD_PSC070
            - AD_PSC071
            - AD_PSC072
            - AD_PSC073
            - AD_PSC074
            - AD_PSC075
            - AD_PSC076
            - AD_PSC077
            - AD_PSC078
            - AD_PSC094
            - AD_PSC096
            - AD_PSC097
            - AD_PSC098
            - AD_PSC099
            - AD_PSC100
            - AD_PSC101
            - AD_PSC102
            - AD_PSC103
            - AD_PSC104
            - AD_PSC107
            - AD_PSC109
            - AD_PSC121
            - AD_PSC122
            - AD_PSC126
            - AD_PSC129
            - AD_PSC130
            - AD_PSC131
            - AD_PSC199
            - AD_PSC999
        dataInizioPrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data inizio prestazione
        dataFinePrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data fine prestazione
        conservazioneANorma:
          maxLength: 100
          minLength: 0
          type: string
          description: Conservazione a norma
        tipoAttivitaClinica:
          type: string
          description: Tipo attivitÃ  clinica
          enum:
            - PHR
            - CON
            - DIS
            - ERP
            - Sistema_TS
            - INI
            - PN_DGC
            - OBS
        identificativoSottomissione:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo sottomissione
        descriptions:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Descriptions
        administrativeRequest:
          maxItems: 1000
          minItems: 0
          type: array
          description: Administrative request
          items:
            type: string
            description: Administrative request
            enum:
              - SSN
              - INPATIENT
              - NOSSN
              - SSR
              - DONOR
        identificativoDoc:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo documento
        identificativoRep:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo repository
        mode:
          type: string
          description: ModalitÃ  di iniezione del CDA
          enum:
            - ATTACHMENT
            - RESOURCE
        healthDataFormat:
          type: string
          description: Formato dei dati sanitari
          enum:
            - CDA
        workflowInstanceId:
          maxLength: 256
          minLength: 0
          type: string
          description: Identificativo del workflow
        priorita:
          type: boolean
          description: Priorita
      additionalProperties: false
    ValidationCDAReqDTO:
      required:
        - activity
      type: object
      properties:
        healthDataFormat:
          type: string
          description: Formato dei dati sanitari
          enum:
            - CDA
        mode:
          type: string
          description: ModalitÃ  di iniezione del CDA
          enum:
            - ATTACHMENT
            - RESOURCE
        activity:
          type: string
          description: AttivitÃ  del gateway
          enum:
            - VERIFICA
            - VALIDATION
      additionalProperties: false
    ValidationResDTO:
      type: object
      properties:
        traceID:
          maxLength: 100
          minLength: 0
          type: string
        spanID:
          maxLength: 100
          minLength: 0
          type: string
        workflowInstanceId:
          maxLength: 256
          minLength: 0
          type: string
          description: Identificativo univoco della transazione
        warning:
          maxLength: 200000
          minLength: 0
          type: string
          description: Dettaglio del warning
      additionalProperties: false
    ValidateAndCreateDTO:
      required:
        - assettoOrganizzativo
        - identificativoDoc
        - identificativoRep
        - identificativoSottomissione
        - tipoAttivitaClinica
        - tipoDocumentoLivAlto
        - tipologiaStruttura
      type: object
      properties:
        tipologiaStruttura:
          type: string
          description: Tipologia struttura che ha prodotto il documento
          enum:
            - Ospedale
            - Prevenzione
            - Territorio
            - SistemaTS
            - Cittadino
            - MdsPN_DGC
        attiCliniciRegoleAccesso:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Regola di accesso
        tipoDocumentoLivAlto:
          type: string
          description: Tipo documento alto livello
          enum:
            - WOR
            - REF
            - LDO
            - RIC
            - SUM
            - TAC
            - PRS
            - PRE
            - ESE
            - PDC
            - VAC
            - CER
            - VRB
            - CON
            - CNT
        assettoOrganizzativo:
          type: string
          description: Assetto organizzativo che ha portato alla creazione del documento
          enum:
            - AD_PSC001
            - AD_PSC002
            - AD_PSC003
            - AD_PSC004
            - AD_PSC005
            - AD_PSC006
            - AD_PSC007
            - AD_PSC008
            - AD_PSC009
            - AD_PSC010
            - AD_PSC011
            - AD_PSC012
            - AD_PSC013
            - AD_PSC014
            - AD_PSC015
            - AD_PSC018
            - AD_PSC019
            - AD_PSC020
            - AD_PSC021
            - AD_PSC024
            - AD_PSC025
            - AD_PSC026
            - AD_PSC027
            - AD_PSC028
            - AD_PSC029
            - AD_PSC030
            - AD_PSC031
            - AD_PSC032
            - AD_PSC033
            - AD_PSC034
            - AD_PSC035
            - AD_PSC036
            - AD_PSC037
            - AD_PSC038
            - AD_PSC039
            - AD_PSC040
            - AD_PSC041
            - AD_PSC042
            - AD_PSC043
            - AD_PSC046
            - AD_PSC047
            - AD_PSC048
            - AD_PSC049
            - AD_PSC050
            - AD_PSC051
            - AD_PSC052
            - AD_PSC054
            - AD_PSC055
            - AD_PSC056
            - AD_PSC057
            - AD_PSC058
            - AD_PSC060
            - AD_PSC061
            - AD_PSC062
            - AD_PSC064
            - AD_PSC065
            - AD_PSC066
            - AD_PSC067
            - AD_PSC068
            - AD_PSC069
            - AD_PSC070
            - AD_PSC071
            - AD_PSC072
            - AD_PSC073
            - AD_PSC074
            - AD_PSC075
            - AD_PSC076
            - AD_PSC077
            - AD_PSC078
            - AD_PSC094
            - AD_PSC096
            - AD_PSC097
            - AD_PSC098
            - AD_PSC099
            - AD_PSC100
            - AD_PSC101
            - AD_PSC102
            - AD_PSC103
            - AD_PSC104
            - AD_PSC107
            - AD_PSC109
            - AD_PSC121
            - AD_PSC122
            - AD_PSC126
            - AD_PSC129
            - AD_PSC130
            - AD_PSC131
            - AD_PSC199
            - AD_PSC999
        dataInizioPrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data inizio prestazione
        dataFinePrestazione:
          maxLength: 100
          minLength: 0
          type: string
          description: Data fine prestazione
        conservazioneANorma:
          maxLength: 100
          minLength: 0
          type: string
          description: Conservazione a norma
        tipoAttivitaClinica:
          type: string
          description: Tipo attivitÃ  clinica
          enum:
            - PHR
            - CON
            - DIS
            - ERP
            - Sistema_TS
            - INI
            - PN_DGC
            - OBS
        identificativoSottomissione:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo sottomissione
        descriptions:
          maxItems: 100
          minItems: 0
          type: array
          items:
            maxLength: 1000
            type: string
            description: Descriptions
        administrativeRequest:
          maxItems: 1000
          minItems: 0
          type: array
          description: Administrative request
          items:
            type: string
            description: Administrative request
            enum:
              - SSN
              - INPATIENT
              - NOSSN
              - SSR
              - DONOR
        identificativoDoc:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo documento
        identificativoRep:
          maxLength: 100
          minLength: 0
          type: string
          description: Identificativo repository
        mode:
          type: string
          description: ModalitÃ  di iniezione del CDA
          enum:
            - ATTACHMENT
            - RESOURCE
        healthDataFormat:
          type: string
          description: Formato dei dati sanitari
          enum:
            - CDA
        priorita:
          type: boolean
          description: Priorita
      additionalProperties: false
    StatusCheckDTO:
      type: object
      properties:
        eventType:
          maxLength: 100
          minLength: 0
          type: string
        eventDate:
          maxLength: 100
          minLength: 0
          type: string
        eventStatus:
          maxLength: 100
          minLength: 0
          type: string
        message:
          maxLength: 10000
          minLength: 0
          type: string
        identificativoDocumento:
          maxLength: 100
          minLength: 0
          type: string
        subject:
          maxLength: 100
          minLength: 0
          type: string
        subjectRole:
          maxLength: 100
          minLength: 0
          type: string
        tipoAttivita:
          maxLength: 100
          minLength: 0
          type: string
        organizzazione:
          maxLength: 100
          minLength: 0
          type: string
        workflowInstanceId:
          maxLength: 256
          minLength: 0
          type: string
        traceId:
          maxLength: 100
          minLength: 0
          type: string
        issuer:
          maxLength: 100
          minLength: 0
          type: string
        expiringDate:
          maxLength: 100
          minLength: 0
          type: string
        extra:
          maxLength: 10000
          minLength: 0
          type: string
      additionalProperties: false
    TransactionInspectResDTO:
      type: object
      properties:
        traceID:
          maxLength: 100
          minLength: 0
          type: string
        spanID:
          maxLength: 100
          minLength: 0
          type: string
        transactionData:
          maxItems: 1000
          minItems: 0
          type: array
          items:
            $ref: '#/components/schemas/StatusCheckDTO'
      additionalProperties: false
  securitySchemes:
    bearerAuth:
      type: http
      description: 'JWT Authorization header using the Bearer scheme. Example: "Authorization: Bearer {token} [RFC8725](https://tools.ietf.org/html/RFC8725)."'
      scheme: bearer
      bearerFormat: JWT
